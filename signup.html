<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up Details</title>
    <link rel="stylesheet" href="signup.css">
</head>
<body>
    <div class="new-header">
        <a href="https://communityfiber.net/" target="_blank">
            <img src="icons/community-fiber-logo.png" alt="Community Fiber Logo" class="logo">
        </a>
        <p>Uncomfortable submitting this information online? Call one of our helpful staff: <span style="color: green; font-weight: bold;">(574) 831-2176</span></p>


    </div>
    <div class="sorry-container">
        <h2>Great Pick!</h2>
        <p>Next step is to provide us with some information so we can get you one step closer to your fiber internet!</p>
       
        <form id="infoForm">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" placeholder="Your Name" required>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Your Email" required>
            
            <label for="phone">Phone Number:</label>
            <input type="phone" id="phone" name="phone" placeholder="Your Phone Number" required>

            <label for="address">Address:</label>
            <input type="text" id="address" name="address" readonly>

            <input type="hidden" id="plan" name="plan"> <!-- Hidden field to store selected plan -->

            <h3>Please note: one of our employees will contact you shortly to confirm the information is correct.</h3>
            <button type="submit">Submit</button>
        </form>
    </div>

    
    
    <div class="pricing-container">
        <div class="pricing-box" data-plan="Standard">
            <div class="panel-heading">Standard</div>
            <div class="panel-body">
                <span>$65/mo</span>
                <div class="speed-features">
                    <div>200 Mbps</div>
                </div>
                <div class="speed-capability">
                    <div>(Down & Up)</div>
                </div>
            </div>
        </div>

        <div class="pricing-box" data-plan="Advanced">
            <div class="panel-heading">Advanced</div>
            <div class="panel-body">
                <span>$80/mo</span>
                <div class="speed-features">
                    <div>500 Mbps</div>
                </div>
                <div class="speed-capability">
                    <div>(Down & Up)</div>
                </div>
            </div>
        </div>

        <div class="pricing-box" data-plan="Premium">
            <div class="panel-heading">Premium</div>
            <div class="panel-body">
                <span class="shimmer">$89/mo</span>
                <div class="speed-features">
                    <div>1 Gbps</div>
                </div>
                <div class="speed-capability">
                    <div>(Down & Up)</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const address = params.get('address') || 'Your Address';
            plan = params.get('plan');

            // Set the address field value
            document.getElementById('address').value = address;
            document.getElementById('plan').value = plan;

            // Display the selected plan pricing box
            displaySelectedPlan(plan);
        });

        // Function to display the selected plan
        function displaySelectedPlan(plan) {
            const pricingBoxes = document.querySelectorAll('.pricing-box');
            pricingBoxes.forEach(box => {
                const boxPlan = box.getAttribute('data-plan');
                if (boxPlan === plan) {
                    box.style.display = 'block';  // Show the selected plan
                } else {
                    box.style.display = 'none';  // Hide other plans
                }
            });
        }
    
    document.getElementById("infoForm").addEventListener("submit", function(event) {
    event.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
    const address = document.getElementById('address').value;
    const plan = document.getElementById('plan').value;  // Ensure this gets the selected plan
    // Create URLSearchParams with proper key-value pairs
    const formData = new URLSearchParams();
    formData.append('name', name);
    formData.append('email', email);
    formData.append('phone', phone);
    formData.append('address', address);
    formData.append('plan', plan);
  
    // Send the data to the server
    fetch('http://localhost:3000/signup', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({ name, email, phone, address, plan }),
})

    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Sign up successful!');
            window.location.href = 'index.html'; // Redirect back to the main page
        } else {
            alert('Sign up failed!');
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
});

</script>
<div class="footer-container">
    <footer class="fusion-footer-widget-area fusion-widget-area">
        <div class="fusion-row">
            <div class="fusion-columns fusion-columns-2 fusion-widget-area">
                <div class="fusion-column col-lg-6 col-md-6 col-sm-6">
                    <section id="text-3" class="fusion-footer-widget-column widget widget_text">
                        <h4 class="widget-title fusion-responsive-typography-calculated" data-fontsize="15" style="--fontSize: 15; line-height: 1; --minFontSize: 15;" data-lineheight="15px">
                            Contact Information:
                        </h4>
                        <div class="textwidget">
                            <p>For sales, service, or to report a problem call: 574-533-4237 or<br>toll free: 844-New-Fiber (844-639-3423)</p>
                        </div>
                        <div style="clear:both;"></div>
                    </section>
                </div>
                <div class="fusion-column fusion-column-last col-lg-6 col-md-6 col-sm-6">
                    <style type="text/css" data-id="text-4">
                        @media (max-width: 800px) {#text-4 {text-align: initial !important;}}
                    </style>
                    <section id="text-4" class="fusion-widget-mobile-align-initial fusion-widget-align-right fusion-footer-widget-column widget widget_text" style="border-style: solid; text-align: right; border-color: transparent; border-width: 0px;">
                        <div class="textwidget">
                            <p><a href="https://communityfiber.net/internet-policies/"><strong>NPT / CFN Open Internet Policies</strong></a></p>
                        </div>
                        <div style="clear:both;"></div>
                    </section>
                </div>
                <div class="fusion-clearfix"></div>
            </div>
        </div>
    </footer>
    <footer id="footer" class="fusion-footer-copyright-area">
        <div class="fusion-row">
            <div class="fusion-copyright-content">
                <div class="fusion-copyright-notice" style="padding-bottom: 0px;">
                    <div>
                        Copyright 2024 Community Fiber Network - an NPTech Company | 19066 Market St / PO Box 47, New Paris IN 46553
                    </div>
                </div>
                <div class="fusion-social-links-footer" style="display: none;"></div>
            </div>
        </div>
    </footer>
</div>
</body>

</html>
